;; *****************************************************************************
;;
;; NOISY SPRITE ROCKET, author: William B. Sanders
;;
;; *****************************************************************************

	.ORG	$C000
	
	SPRITE0 = 	$7F8
	ENABLE	=	$D015
	COLOR0	=	$D027
	SP0X	=	$D000
	SP0Y	=	$D001
	MSBX	=	$D010
	SHOUSE	=	$0340
	SIGVOL	=	$D418
	ATDCY1	=	$D405
	SUREL1	=	$D406
	VCREG1	=	$D404
	FRELO1	=	$D400
	FREHI1	=	$D401
	HI	=	$C300
	WHY	=	$C304
	EX	=	$C306

	
;;; SPRITE SUBROUTINE

	JSR	$E544
	LDA	#$0D
	STA	SPRITE0
	LDA	#1
	STA	ENABLE
	LDA	#2
	STA	COLOR0
	LDX	#0
	LDA	#$00
CLEANUP	STA	SHOUSE,X
	INX
	CPX	#64
	BNE	CLEANUP
	LDX	#0
BUILD	LDA	DATA,X
	STA	SHOUSE,X
	INX
	CPX	#63
	BNE	BUILD
	LDA	#0
	STA	MSBX
	LDX	#0
	STX	EX
	LDA	#70
	STA	WHY		;Preserve "Y"
MOVE	STX	SP0X
	LDA	WHY
	STA	SP0Y
	INC	EX		;Increment X THROUGH EX
	LDX	EX

;;; SOUND SUBROUTINE
;;; NO PAUSE LOOP SINCE THE SOUND SLOWS
;;; DOWN MOVEMENT
	LDA	#10
	STA	HI
START	LDA	#15
	STA	SIGVOL
	LDA	#128
	STA	ATDCY1
	STA	SUREL1
	LDA	HI
	STA	FRELO1
	LDA	HI
	STA	FREHI1
	LDA	#17
	STA	VCREG1
	LDY	#0
SET	LDX	#0
PLAY	INX
	CPX	#20
	BNE	PLAY
	INY
	CPY	#20
	BNE	SET
	LDA	#0
	STA	VCREG1
	STA	ATDCY1
	STA	SUREL1
	STA	FRELO1
	STA	FREHI1
	INC	HI
	LDA	HI
	CMP	#40
	BNE	START
	LDX	EX
	CPX	#254
	BNE	MOVE		;Back TO Sprite

;;; END OF PROGRAM AND SPRITE DATA
	RTS
DATA	DFB	0,0,0,0,0,0,0,0,0
	DFB	0,0,0,0,0,0,128,0,0
	DFB	224,0,0,252,0,0
	DFB	255,128,0
	DFB	255,240,28
	DFB	31,255,240
	DFB	63,255,63
	DFB	63,255,63
	DFB	31,255,240
	DFB	255,240,0
	DFB	255,128,0
	DFB	252,0,0
	DFB	224,0,0
	DFB	128,0,0
	DFB	0,0,0,0,0,0
	
	
